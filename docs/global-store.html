<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Atomik Framework</title>

    <link type="text/css" rel="stylesheet" href="/docs/assets/css/reset.css">
    <link type="text/css" rel="stylesheet" href="http://yandex.st/highlightjs/6.1/styles/sunburst.min.css">
    <link type="text/css" rel="stylesheet" href="/docs/assets/css/docs.css">
    <link type="text/css" rel="stylesheet" href="/docs/assets/css/print.css" media="print">
    <link type="text/css" rel="stylesheet" href="style.css">

    <script type="text/javascript" src="/docs/assets/js/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="http://yandex.st/highlightjs/6.1/highlight.min.js"></script>
    <script type="text/javascript" src="/docs/assets/js/lunr.min.js"></script>

    

    <script type="text/javascript">var BASE_URL = "/docs/";</script>
    <script type="text/javascript" src="/docs/assets/js/viewer.js"></script>

    
</head>
<body>
    <div id="page">
        <a name="top" />
        <header id="header">
            <h1><a href="/docs/">Atomik Framework</a></h1>
        </header>
        

<div id="sidebar">
    <form action="/docs/search.html"><input id="search" type="text" placeholder="Search" name="q" /></form>
    <nav id="toc">
        
    <ol>
    
        <li>
            <a href="/docs/introduction.html#introduction">Introduction</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/introduction.html#requirements">Requirements</a>
            
        </li>
    
        <li>
            <a href="/docs/introduction.html#installation">Installation</a>
            
        </li>
    
        <li>
            <a href="/docs/introduction.html#about-the-skeleton">About the skeleton</a>
            
        </li>
    
        <li>
            <a href="/docs/introduction.html#directory-structure">Directory structure</a>
            
        </li>
    
        <li>
            <a href="/docs/introduction.html#advanced-installation">Advanced installation</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/get-started.html#get-started">Get started</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/get-started.html#the-database">The database</a>
            
        </li>
    
        <li>
            <a href="/docs/get-started.html#listing-posts">Listing posts</a>
            
        </li>
    
        <li>
            <a href="/docs/get-started.html#creating-new-posts">Creating new posts</a>
            
        </li>
    
        <li>
            <a href="/docs/get-started.html#viewing-a-post">Viewing a post</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/global-store.html#the-global-store">The global store</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/global-store.html#accessing-the-store">Accessing the store</a>
            
        </li>
    
        <li>
            <a href="/docs/global-store.html#nested-arrays">Nested arrays</a>
            
        </li>
    
        <li>
            <a href="/docs/global-store.html#accessing-the-global-store-from-actions-and-views">Accessing the global store from actions and views</a>
            
        </li>
    
        <li>
            <a href="/docs/global-store.html#using-accessors-with-any-array">Using accessors with any array</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/configuration.html#configuration">Configuration</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/configuration.html#configuration-file">Configuration file</a>
            
        </li>
    
        <li>
            <a href="/docs/configuration.html#bootsrapping">Bootsrapping</a>
            
        </li>
    
        <li>
            <a href="/docs/configuration.html#custom-directory-structure">Custom directory structure</a>
            
        </li>
    
        <li>
            <a href="/docs/configuration.html#pre-and-post-dispatch-files">Pre and post dispatch files</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/urls.html#urls">URLs</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/urls.html#calling-an-action">Calling an action</a>
            
        </li>
    
        <li>
            <a href="/docs/urls.html#routing-urls">Routing urls</a>
            
        </li>
    
        <li>
            <a href="/docs/urls.html#file-extensions">File extensions</a>
            
        </li>
    
        <li>
            <a href="/docs/urls.html#building-urls">Building urls</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/actions.html#actions">Actions</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/actions.html#introduction">Introduction</a>
            
        </li>
    
        <li>
            <a href="/docs/actions.html#action-files">Action files</a>
            
        </li>
    
        <li>
            <a href="/docs/actions.html#actions-and-http-methods">Actions and HTTP methods</a>
            
        </li>
    
        <li>
            <a href="/docs/actions.html#redirections-and-404-errors">Redirections and 404 errors</a>
            
        </li>
    
        <li>
            <a href="/docs/actions.html#includes">Includes</a>
            
        </li>
    
        <li>
            <a href="/docs/actions.html#calling-actions-programmatically">Calling actions programmatically</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/views.html#views">Views</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/views.html#views">Views</a>
            
        </li>
    
        <li>
            <a href="/docs/views.html#layout">Layout</a>
            
        </li>
    
        <li>
            <a href="/docs/views.html#view-contexts">View contexts</a>
            
        </li>
    
        <li>
            <a href="/docs/views.html#controlling-views">Controlling views</a>
            
        </li>
    
        <li>
            <a href="/docs/views.html#rendering-views-programmatically">Rendering views programmatically</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/helpers.html#helpers">Helpers</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/helpers.html#creating-helpers">Creating helpers</a>
            
        </li>
    
        <li>
            <a href="/docs/helpers.html#using-helpers">Using helpers</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/utilities.html#utilities">Utilities</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/utilities.html#escaping-text">Escaping text</a>
            
        </li>
    
        <li>
            <a href="/docs/utilities.html#friendly-urls">Friendly urls</a>
            
        </li>
    
        <li>
            <a href="/docs/utilities.html#filtering-and-validating-data">Filtering and validating data</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/using-plugins.html#using-plugins">Using plugins</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/using-plugins.html#installing-a-plugin">Installing a plugin</a>
            
        </li>
    
        <li>
            <a href="/docs/using-plugins.html#activating-and-configuring-a-plugin">Activating and configuring a plugin</a>
            
        </li>
    
        <li>
            <a href="/docs/using-plugins.html#pluggable-applications">Pluggable applications</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/session.html#session">Session</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/session.html#starting-and-accessing-the-session">Starting and accessing the session</a>
            
        </li>
    
        <li>
            <a href="/docs/session.html#flash-messages">Flash messages</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/error-log-debug.html#error-handling-logging-and-debugging">Error handling, logging and debugging</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/error-log-debug.html#handling-errors">Handling errors</a>
            
        </li>
    
        <li>
            <a href="/docs/error-log-debug.html#logging">Logging</a>
            
        </li>
    
        <li>
            <a href="/docs/error-log-debug.html#debugging">Debugging</a>
            
        </li>
    
        <li>
            <a href="/docs/error-log-debug.html#debug-bar">Debug Bar</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/database.html#database">Database</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/database.html#connecting">Connecting</a>
            
        </li>
    
        <li>
            <a href="/docs/database.html#querying-data">Querying data</a>
            
        </li>
    
        <li>
            <a href="/docs/database.html#manipulating-data">Manipulating data</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/scripts.html#scripts">Scripts</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/scripts.html#creating-custom-scripts">Creating custom scripts</a>
            
        </li>
    
        <li>
            <a href="/docs/scripts.html#registering-commands">Registering commands</a>
            
        </li>
    
        <li>
            <a href="/docs/scripts.html#built-in-commands">Built-in commands</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/translations.html#translations">Translations</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/translations.html#creating-language-files">Creating language files</a>
            
        </li>
    
        <li>
            <a href="/docs/translations.html#detecting-the-user-language">Detecting the user language</a>
            
        </li>
    
        <li>
            <a href="/docs/translations.html#translating-strings">Translating strings</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/controllers.html#controller">Controller</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/controllers.html#differences-with-the-classic-atomik-way">Differences with the classic Atomik way</a>
            
        </li>
    
        <li>
            <a href="/docs/controllers.html#creating-controllers">Creating controllers</a>
            
        </li>
    
        <li>
            <a href="/docs/controllers.html#using-controllers-in-pluggable-apps">Using controllers in Pluggable Apps</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/events.html#events">Events</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/events.html#listening-to-events">Listening to events</a>
            
        </li>
    
        <li>
            <a href="/docs/events.html#firing-events">Firing events</a>
            
        </li>
    
        <li>
            <a href="/docs/events.html#events-naming-convention">Events naming convention</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="/docs/developing-plugins.html#developing-plugins">Developing plugins</a>
            
                
    <ol>
    
        <li>
            <a href="/docs/developing-plugins.html#the-plugin-file">The plugin file</a>
            
        </li>
    
        <li>
            <a href="/docs/developing-plugins.html#configuration">Configuration</a>
            
        </li>
    
        <li>
            <a href="/docs/developing-plugins.html#using-a-class">Using a class</a>
            
        </li>
    
        <li>
            <a href="/docs/developing-plugins.html#pluggable-applications">Pluggable applications</a>
            
        </li>
    
        <li>
            <a href="/docs/developing-plugins.html#assets-and-urls">Assets and urls</a>
            
        </li>
    
        <li>
            <a href="/docs/developing-plugins.html#loading-plugins-programmaticaly">Loading plugins programmaticaly</a>
            
        </li>
    
</ol>

            
        </li>
    
</ol>

    </nav>
    
    <nav id="links">
        <ul>
            
        </ul>
    </nav>
    
</div>

        <div id="content">
            <a name="the-global-store"></a><h1>The global store</h1>
<p>Atomik provides a global store where anything can be saved for the time of a request.
This global store acts like an associative array with key/value pairs.
It&#39;s mainly used to store the configuration.</p>
<a name="accessing-the-store"></a><h2>Accessing the store</h2>
<p>Accessors are methods provided by the Atomik class that allow you to 
access the global store. They are six of them: <em>get</em>, <em>set</em>, <em>add</em>, <em>prepend</em>,
<em>has</em> and <em>delete</em>.</p>
<p>The <code>get()</code> method allows you to retrieve the value
associated to the key passed as first argument. If a second argument is 
specified it will be use as a default value in the case where the key is
not found.</p>
<pre><code>echo Atomik::get(&#39;key&#39;);
echo Atomik::get(&#39;keyThatDoesntExist&#39;, &#39;defaultValue&#39;);</code></pre>
<p>There&#39;s also a <code>Atomik::getRef()</code> method to obtain a
reference to the value. However this method do not have a default value parameter
and it will return null if the key is not found.</p>
<p>The <code>set()</code> method allows you to define a key and its
associated value. It will overwrite any existing value.</p>
<p>This accessor can also take an array as argument to set multiple key/value pairs
at once. This array will be merged with the store.</p>
<pre><code>Atomik::set(&#39;key&#39;, &#39;value&#39;);

Atomik::set(array(
    &#39;key1&#39; =&gt; &#39;value1&#39;,
    &#39;key2&#39; =&gt; &#39;value2&#39;
));</code></pre>
<p>The <code>add()</code> method works like the <code>set()</code>
method but rather than replacing values when they already exists, adds them. For
example if the key points to an array, the value will be added to this array as a new
item. If the key points to a value which is not an array, it will be transformed to
one.</p>
<p><code>prepend()</code> is exactly the same but adds the value at the beginning
of the array.</p>
<pre><code>Atomik::set(&#39;key1&#39;, array(&#39;item1&#39;));
Atomik::add(&#39;key1&#39;, &#39;item2&#39;);
Atomik::add(&#39;key1&#39;, array(&#39;item3&#39;, &#39;item4&#39;));
$array = Atomik::get(&#39;key1&#39;); // array(&#39;item1&#39;, &#39;item2&#39;, &#39;item3&#39;, &#39;item4&#39;)</code></pre>
<p>The <code>has()</code> and <code>delete()</code>
methods only take a key as argument. The first one checks if the key exists
and the second deletes the key and its value. The method also returns the value
which had the deleted key or false if the key didn&#39;t exist.</p>
<pre><code>if (Atomik::has(&#39;key&#39;)) {
    Atomik::delete(&#39;key&#39;);
}</code></pre>
<a name="nested-arrays"></a><h2>Nested arrays</h2>
<p>Dots can be used to access nested arrays. Each segment in the key has to point to a nested
array unless it&#39;s the last one.</p>
<pre><code>Atomik::set(&#39;users&#39;, array(
    &#39;paul&#39; =&gt; array(
        &#39;id&#39; =&gt; 1,
        &#39;age&#39; =&gt; 20
    ),
    &#39;peter&#39; =&gt; array(
        &#39;id&#39; =&gt; 2,
        &#39;age&#39; =&gt; 33
    )
));

$paul = Atomik::get(&#39;users.paul&#39;); // returns an array
$paulAge = Atomik::get(&#39;users.paul.age&#39;); // returns 20
$peterId = Atomik::get(&#39;users.peter.id&#39;); // returns 2

Atomik::set(&#39;users.sofia&#39;, array(
    &#39;id&#39; =&gt; 3,
    &#39;age&#39; =&gt; 25
));

$sofiaAge = Atomik::get(&#39;users.sofia.age&#39;);</code></pre>
<p>You can also use paths in sub arrays when setting some values.</p>
<pre><code>Atomik::set(array(
    &#39;users&#39; =&gt; array(
        &#39;paul.age&#39; =&gt; 22,
        &#39;paul.friends&#39; =&gt; array(
            &#39;peter.age&#39; =&gt; 20
        )
    )
));

echo Atomik::get(&#39;users.paul.age&#39;); // 22

var_export(Atomik::get(&#39;users.paul.friends&#39;));
array(
    &#39;peter&#39; =&gt; array(
        &#39;age&#39; =&gt; 20
    )
)</code></pre>
<p><code>Atomik::dimensionizeArray()</code> can be used to <em>dimensionize</em> any array.</p>
<p>When using an array, be aware that it will be <em>dimensionized</em> before being
merged. This is done using <code>Atomik::dimensionizeArray()</code>. It can be avoided
using false as the third argument of <code>set()</code>.</p>
<p>To avoid a key to be dimensionized, you can escape dots using double dots:</p>
<pre><code>Atomik::set(&#39;routes&#39;, array(
    &#39;/users..json&#39; =&gt; array(&#39;action&#39; =&gt; &#39;users&#39;, &#39;format&#39; =&gt; &#39;json&#39;)
));</code></pre>
<a name="accessing-the-global-store-from-actions-and-views"></a><h2>Accessing the global store from actions and views</h2>
<p>You should always access the global store through <code>$this</code> from actions
and views. Get values using the same syntax as with arrays:</p>
<pre><code>$this[&#39;users&#39;] = array(
    &#39;paul&#39; =&gt; array(
        &#39;id&#39; =&gt; 1,
        &#39;age&#39; =&gt; 20
    )
);
if (isset($this[&#39;users.paul&#39;])) {
    $age = $this[&#39;users.paul.age&#39;];
    unset($this[&#39;users.paul&#39;]);
}</code></pre>
<p>Accessors are also available as methods of ̀$this`:</p>
<pre><code>$age = $this-&gt;get(&#39;users.paul.age&#39;, 21);</code></pre>
<a name="using-accessors-with-any-array"></a><h2>Using accessors with any array</h2>
<p>Accessors can be used with any array. You need to pass as argument an array
(the position of the argument depends on the method). See the API guide for 
more information. Still, here&#39;s an example:</p>
<pre><code>$array = array();
Atomik::set(&#39;key&#39;, &#39;value&#39;, $array);
echo Atomik::get(&#39;key&#39;, null, $array);</code></pre>




        </div>
        <footer id="footer">
            Powered by <a href="http://github.com/maximebf/beautiful-docs">beautiful-docs</a> -
            <a href="#top">Back to top</a> - <a href="/docs/all.html">Everything on a single page</a>
            - <a href="?print=1">Print current page</a> - <a href="/docs/all.html?print=1">Print all pages</a>
            
        </footer>
    </div>
</body>
</html>
