<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Chapter 6. Lang</title>
    <link rel="stylesheet" href="../styles.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="start" href="index.html" title="Atomik Plugins Manual" />
    <link rel="up" href="index.html" title="Atomik Plugins Manual" />
    <link rel="prev" href="ch05.html" title="Chapter 5. Db" />
    <link rel="next" href="ch07.html" title="Chapter 7. Session" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">Chapter 6. Lang</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="ch05.html">Prev</a> </td>
          <th width="60%" align="center"> </th>
          <td width="20%" align="right"> <a accesskey="n" href="ch07.html">Next</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="lang"></a>Chapter 6. Lang</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch06.html#language-files">Creating language files</a></span></dt><dt><span class="sect1"><a href="ch06.html#lang-detection">Detecting the user language</a></span></dt><dt><span class="sect1"><a href="ch06.html#translate">Translating strings</a></span></dt></dl></div>
	
	<p>
		The Lang plugin adds translation features to Atomik.
	</p>
	<p>
		This plugin is gettext-like. You write your application in its default language and then
		provide translations for each part of text.
	</p>
	<div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="language-files"></a>Creating language files</h2></div></div></div>
		
		<p>
			A language file provides translation from one language to another.
		</p>
		<p>
			They are stored in the <code class="filename">app/languages</code> directory. This can
			be changed using the “<span class="quote">dir</span>” configuration key. Files be named after
			the first part of the locale. For example, if the file provide translation to French, it has to be
			named <code class="filename">fr.php</code> (because the locale is fr-fr).
		</p>
		<p>
			In the language file you must defined messages using the 
			<code class="methodname">LangPlugin::setMessages()</code> method. The messages is made of
			the string of the original language and the translated one.
		</p>
		<div class="example"><a id="id1153923"></a><p class="title"><b>Example 6.1. A translation file</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
&lt;?php
LangPlugin::setMessages(array(
	'hello' =&gt; 'bonjour',
	'how are you?' =&gt; 'comment ca va?'
));
			</pre>
		</div></div><br class="example-break" />
	</div>
	<div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="lang-detection"></a>Detecting the user language</h2></div></div></div>
		
		<p>
			By default, the plguin will autodetect the language using HTTP headers. This can be turned off
			by setting false to the “<span class="quote">autodetect</span>” configuration key.
		</p>
		<p>
			If the language cannot be detected, it will fall back on the default language defined in the
			“<span class="quote">language</span>” configuration key.
		</p>
		<p>
			You can also set the language manually using <code class="methodname">LangPlugin::set()</code>.
		</p>
		<div class="example"><a id="id1153968"></a><p class="title"><b>Example 6.2. Setting the language manually</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
LangPlugin::set('fr');
			</pre>
		</div></div><br class="example-break" />
		<p>
			The current language is available from the global store under the “<span class="quote">language</span>” key.
		</p>
		<div class="example"><a id="id1153987"></a><p class="title"><b>Example 6.3. Retreiving the current language</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
$currentLanguage = A('language');
			</pre>
		</div></div><br class="example-break" />
	</div>
	<div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="translate"></a>Translating strings</h2></div></div></div>
		
		<p>
			To enable translation for a string use the <code class="methodname">LangPlugin::_()</code> method.
		</p>
		<div class="example"><a id="id1154018"></a><p class="title"><b>Example 6.4. Translating a string</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
LangPlugin::set('fr');
echo LangPlugin::_('hello'); // will echo bonjour
echo LangPlugin::_('how are you?'); // will echo comment ca va?
			</pre>
		</div></div><br class="example-break" />
		<p>
			A shortcut function is also defined: <code class="function">__()</code>.
		</p>
		<div class="example"><a id="id1154039"></a><p class="title"><b>Example 6.5. Translating a string using the shortcut function</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
LangPlugin::set('fr');
echo __('hello'); // will echo bonjour
echo __('how are you?'); // will echo comment ca va?
			</pre>
		</div></div><br class="example-break" />
		<p>
			This method can also be use like the <code class="function">vsprintf()</code> function. It can replace
			patterns in the string by values provided as an array as the second argument.
		</p>
		<div class="example"><a id="id1154059"></a><p class="title"><b>Example 6.6. Translating a string with replacements</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
echo __('hello %s', array('Peter'));
			</pre>
		</div></div><br class="example-break" />
	</div>
</div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="ch05.html">Prev</a> </td>
          <td width="20%" align="center"> </td>
          <td width="40%" align="right"> <a accesskey="n" href="ch07.html">Next</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">Chapter 5. Db </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Home</a>
          </td>
          <td width="40%" align="right" valign="top"> Chapter 7. Session</td>
        </tr>
      </table>
    </div>
  </body>
</html>
