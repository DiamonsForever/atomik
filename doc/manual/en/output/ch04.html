<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Chapter 4. Accessors and configuration</title>
    <link rel="stylesheet" href="styles.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="start" href="index.html" title="Atomik Framework Manual" />
    <link rel="up" href="index.html" title="Atomik Framework Manual" />
    <link rel="prev" href="ch03.html" title="Chapter 3. Installation" />
    <link rel="next" href="ch05.html" title="Chapter 5. URLs" />
  </head>
  <body>
    <div class="navheader">
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">Chapter 4. Accessors and configuration</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="ch03.html">Prev</a> </td>
          <th width="60%" align="center"> </th>
          <td width="20%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="chapter" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title"><a id="accessors-configuration"></a>Chapter 4. Accessors and configuration</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="ch04.html#accessors">Accessors</a></span></dt><dt><span class="sect1"><a href="ch04.html#path-in-keys">Using paths in keys</a></span></dt><dt><span class="sect1"><a href="ch04.html#accessors-with-any-arrays">Using accessors with any arrays</a></span></dt><dt><span class="sect1"><a href="ch04.html#configuration-file">The configuration file</a></span></dt></dl></div>
	
	<p>
		In Atomik, the way configuration works is a bit different. Rather than
		having a dedicated system, it offers a global store where anything can
		be saved for the time of a request.
	</p>
	<p>
		This global store act like an associative array with key/value pairs.
	</p>
	<div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="accessors"></a>Accessors</h2></div></div></div>
		
		<p>
			Accessors are methods provided by the Atomik class that allow you to 
			access the global store. They are four of them: <code class="methodname">get</code>, 
			<code class="methodname">set</code>, <code class="methodname">has</code> and 
			<code class="methodname">delete</code>.
		</p>
		<p>
			The <code class="methodname">get</code> method allow you to retreive the value
			associated to the key passed as first argument. If a second argument is 
			specified it will be use as a default value in the case where the key is
			not found.
		</p>
		<div class="example"><a id="id3366717"></a><p class="title"><b>Example 4.1. Using the <code class="methodname">get</code> method</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
echo Atomik::get('key');
echo Atomik::get('keyThatDoesntExist', 'defaultValue');
			</pre>
		</div></div><br class="example-break" />
		<p>
			The <code class="methodname">set</code> method allow you to define a key and its
			associated value. It will overwrite an existing value.
		</p>
		<p>
			This accessor can also take an array as argument to set multiple key/value pairs
			at once. This array will be merged with the store.
		</p>
		<div class="example"><a id="id3366747"></a><p class="title"><b>Example 4.2. Using the <code class="methodname">set</code> method</b></p><div class="example-contents">
			
			<p>
				Setting one key
			</p>
			<pre class="programlisting">
				
Atomik::set('key', 'value');
			</pre>
			<p>
				Setting multiple keys
			</p>
			<pre class="programlisting">
				
Atomik::set(array(
	'key1' =&gt; 'value1',
	'key2' =&gt; 'value2'
));
			</pre>
		</div></div><br class="example-break" />
		<p>
			The <code class="methodname">has</code> and the <code class="methodname">delete</code>
			methods only take a key as argument. The first one checks if the key exists
			and the second delete the key and its value.
		</p>
		<div class="example"><a id="id3366790"></a><p class="title"><b>Example 4.3. Using the <code class="methodname">has</code> and <code class="methodname">delete</code> methods</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
if (Atomik::has('key')) {
	Atomik::delete('key');
}
			</pre>
		</div></div><br class="example-break" />
	</div>
	<div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="path-in-keys"></a>Using paths in keys</h2></div></div></div>
		
		<p>
			Paths can be used to access nested arrays. Each key in the path as to point to a nested
			array unless it's the last one. Keys are separated by a slash. 
		</p>
		<div class="example"><a id="id3366828"></a><p class="title"><b>Example 4.4. Using paths</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
Atomik::set('users', array(
	'paul' =&gt; array(
		'id' =&gt; 1,
		'age' =&gt; 20
	),
	'peter' =&gt; array(
		'id' =&gt; 2,
		'age' =&gt; 33
	)
));

$paul = Atomik::get('users/paul'); // returns an array
$paulAge = Atomik::get('users/paul/age'); // returns 20
$peterId = Atomik::get('users/peter/id'); // returns 2

Atomik::set('users/sofia', array(
	'id' =&gt; 3,
	'age' =&gt; 25
));

$sofiaAge = Atomik::get('users/sofia/age');
			</pre>
		</div></div><br class="example-break" />
	</div>
	<div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="accessors-with-any-arrays"></a>Using accessors with any arrays</h2></div></div></div>
		
		<p>
			Accessors can be used on any array. You need to pass as argument an array
			(the position depends on the method). See the API guide for more information.
			Still, here's an example:
		</p>
		<div class="example"><a id="id3366860"></a><p class="title"><b>Example 4.5. Using accessors with any array</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
$array = array();

Atomik::set('key', 'value', $array);

echo Atomik::get('key', null, $array);
			</pre>
		</div></div><br class="example-break" />
	</div>
	<div class="sect1" lang="en" xml:lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="configuration-file"></a>The configuration file</h2></div></div></div>
		
		<p>
			Atomik provides a default configuration for everything (to fullfill the convention
			over configuration principle). However, you can override it and provide plugin's
			configuration or even your own.
		</p>
		<p>
			To do so, there is two possibilities: 
			</p><div class="itemizedlist"><ul type="disc"><li>
					modify Atomik's core file (<code class="filename">index.php</code>)
				</li><li>
					create a <code class="filename">config.php</code> file in the same directory as
					Atomik's core file
				</li></ul></div><p>
		</p>
		<p>
			The first method is greatly discourage. It can however be useful if you want to
			create your own Atomik distribution (this should be the only reason to use this
			method).
		</p>
		<p>
			The second method is of course the prefered one. It allows clearer configuration
			in a unique place, perfect for maintenance. Just create a <code class="filename">config.php</code>
			file in the same directory as Atomik's core file (<code class="filename">index.php</code>).
			In this file, you can use accessors (the <code class="methodname">set</code> method of course)
			to define configuration keys.
		</p>
		<div class="example"><a id="id3366943"></a><p class="title"><b>Example 4.6. Exemple <code class="filename">config.php</code> file</b></p><div class="example-contents">
			
			<pre class="programlisting">
				
&lt;?php

/* configuration */
Atomik::set(array(

	'key1' =&gt; 'value1',
	
	'key2' =&gt; value2',
	
	'key3' =&gt; array(
	
		'key3.1' =&gt; 'value3.1'
	
	)

));
			</pre>
		</div></div><br class="example-break" />
		<p>
			The configuration filename can be overrided in Atomik's core configuration.
		</p>
	</div>
</div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="ch03.html">Prev</a> </td>
          <td width="20%" align="center"> </td>
          <td width="40%" align="right"> <a accesskey="n" href="ch05.html">Next</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">Chapter 3. Installation </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Home</a>
          </td>
          <td width="40%" align="right" valign="top"> Chapter 5. URLs</td>
        </tr>
      </table>
    </div>
  </body>
</html>
